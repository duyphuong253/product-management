extends ../../layouts/default.pug
include ../../mixins/box-head.pug
include ../../mixins/alert.pug

block main
    +alert-success(3000)
    +alert-error(3000)

    .container.my-3
        .row
            .col-12
                +box-head("Đặt hàng")
        
        .row
            .col-12
                table.table.table-bordered
                    thead
                        if(cartDetail.products.length > 0)
                            tr
                                th STT
                                th Ảnh
                                th Tên sản phẩm
                                th Giá
                                th Số lượng
                                th Tổng tiền
                    tbody
                        if (cartDetail.products.length > 0)
                            each item, index in cartDetail.products
                                tr
                                    td #{index + 1}
                                    td
                                        img(
                                            src=item.productInfo.thumbnail
                                            alt=item.productInfo.title
                                            width="80"
                                        )
                                    td #{item.productInfo.title}
                                    td #{item.productInfo.priceNew}$
                                    td #{item.quantity}
                                    td #{item.totalPrice}$
                        else
                            tr
                                td(colspan="6" class="text-center")
                                    | Không có sản phẩm trong giỏ hàng

                h3(class="text-right") Tổng đơn hàng: #{cartDetail.totalPrice}$

    if(cartDetail.products.length > 0)
        .row
            .col-12
                .card.p-4.my-4
                    form(
                        action="/checkout/order"
                        method="POST"
                    )
                        div(class="form-group")
                            label(for="fullName") Họ và tên
                            input(
                                class="form-control"
                                type="text"
                                id="fullName"
                                name="fullName"
                                placeholder="Nhập họ và tên"
                                required
                            )

                        div(class="form-group")
                            label(for="phone") Số điện thoại
                            input(
                                class="form-control"
                                type="tel"
                                id="phone"
                                name="phone"
                                placeholder="Nhập số điện thoại"
                                required
                            )

                        div(class="form-group")
                            label(for="address") Địa chỉ giao hàng
                            input(
                                type="text"
                                class="form-control"
                                id="address"
                                name="address"
                                placeholder="Nhập địa chỉ giao hàng"
                                required
                            )

                        div(class="form-group")
                            button(
                                type="submit"
                                class="btn btn-success btn-block"
                            ) ĐẶT HÀNG
